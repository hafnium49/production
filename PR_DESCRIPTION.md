# Pull Request: Code Interpreter IAM Permissions Fix

## Summary

This PR adds comprehensive documentation to fix Code Interpreter access restrictions in AWS Bedrock AgentCore deployments (finale section).

## Problem

Students following Step 8 of the finale/README.md to add Code Interpreter functionality encounter a silent failure:
- Code works perfectly when tested locally
- Deployed agents fail with "I encountered access restrictions when trying to execute it"
- The agent creates todo items but cannot actually invoke the Code Interpreter service

## Root Cause

The IAM execution role auto-generated by AgentCore lacks specific Bedrock API permissions needed for Code Interpreter:
- `bedrock:InvokeCodeInterpreter`
- `bedrock:ExecuteCode`

While the role has `bedrock-agentcore:*` via `BedrockAgentCoreFullAccess`, it's missing the Bedrock service permissions.

## Solution Provided

This contribution adds:

1. **Comprehensive troubleshooting guide** (`code_interpreter_iam_fix.md`):
   - Step-by-step diagnosis to confirm the issue
   - Clear fix instructions with AWS CLI commands
   - Before/after examples showing the fix works
   - Alternative approach for pre-creating execution roles

2. **Ready-to-use IAM policies**:
   - `code-interpreter-policy.json`: Complete IAM policy with all needed permissions
   - `trust-policy.json`: Trust policy for pre-creating execution roles

## Why This Matters

- **Common issue**: Every student using Code Interpreter will hit this
- **Not obvious**: Works locally but fails in AWS (confusing!)
- **Well-documented**: Clear diagnosis steps and multiple solutions
- **Tested**: Verified to work on deployed agents

## Testing

Tested on:
- AWS Region: us-west-2
- Python 3.12 with uv
- Claude Sonnet 4 (anthropic.claude-sonnet-4-20250514-v1:0)
- AgentCore SDK (latest version)

Verified:
- ✅ Local agent works before fix
- ✅ Deployed agent fails without fix
- ✅ Adding IAM permissions resolves the issue immediately
- ✅ No redeployment needed after permission fix

## Files Changed

```
community_contributions/code_interpreter_iam_fix.md          (New)
community_contributions/code_interpreter_iam_fix/
  ├── code-interpreter-policy.json                           (New)
  └── trust-policy.json                                      (New)
```

## Related Work

Similar to `jwt_token_60s_fix.md` - both document configuration adjustments needed for specific use cases.

## Community Impact

This fix will help students:
- Quickly diagnose Code Interpreter permission issues
- Understand the root cause (educational value)
- Apply the fix without trial and error
- Learn about IAM execution roles in AgentCore

---

**Contribution Type**: Documentation + Configuration Files
**Target Section**: Finale (AWS Bedrock AgentCore)
**Status**: Ready for Review
